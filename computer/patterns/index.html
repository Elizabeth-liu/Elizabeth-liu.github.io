<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>设计模式 | Elizabeth</title>
    <meta name="description" content="Vue-powered Static Site Generator">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.0f4aee89.css" as="style"><link rel="preload" href="/assets/js/app.f73642b0.js" as="script"><link rel="preload" href="/assets/js/13.f5dee087.js" as="script"><link rel="prefetch" href="/assets/js/2.f479639b.js"><link rel="prefetch" href="/assets/js/3.d105f2e7.js"><link rel="prefetch" href="/assets/js/4.dbfe2a39.js"><link rel="prefetch" href="/assets/js/5.92d0d6e6.js"><link rel="prefetch" href="/assets/js/6.b062d83d.js"><link rel="prefetch" href="/assets/js/7.55c499db.js"><link rel="prefetch" href="/assets/js/8.0c4880fd.js"><link rel="prefetch" href="/assets/js/9.327f516d.js"><link rel="prefetch" href="/assets/js/10.ebcc76c6.js"><link rel="prefetch" href="/assets/js/11.780d400a.js"><link rel="prefetch" href="/assets/js/12.037e5bce.js"><link rel="prefetch" href="/assets/js/14.cee626af.js"><link rel="prefetch" href="/assets/js/15.f68dee5a.js"><link rel="prefetch" href="/assets/js/16.341e4e11.js"><link rel="prefetch" href="/assets/js/17.8f56661e.js"><link rel="prefetch" href="/assets/js/18.26375785.js"><link rel="prefetch" href="/assets/js/19.f3e60111.js"><link rel="prefetch" href="/assets/js/20.ba029978.js"><link rel="prefetch" href="/assets/js/21.2924025b.js"><link rel="prefetch" href="/assets/js/22.a2692a14.js"><link rel="prefetch" href="/assets/js/23.0a7a1d29.js"><link rel="prefetch" href="/assets/js/24.2e57208c.js"><link rel="prefetch" href="/assets/js/25.c784b3be.js"><link rel="prefetch" href="/assets/js/26.d7d6b1c3.js"><link rel="prefetch" href="/assets/js/27.c04ade72.js"><link rel="prefetch" href="/assets/js/28.96ac0fdc.js"><link rel="prefetch" href="/assets/js/29.15396353.js"><link rel="prefetch" href="/assets/js/30.f1355540.js"><link rel="prefetch" href="/assets/js/31.cb8fa6fa.js"><link rel="prefetch" href="/assets/js/32.8b12cd22.js"><link rel="prefetch" href="/assets/js/33.b3fea09a.js"><link rel="prefetch" href="/assets/js/34.b642d5fc.js"><link rel="prefetch" href="/assets/js/35.2acbc166.js"><link rel="prefetch" href="/assets/js/36.9c564e3b.js"><link rel="prefetch" href="/assets/js/37.0c39fccf.js"><link rel="prefetch" href="/assets/js/38.d47136e4.js"><link rel="prefetch" href="/assets/js/39.29d92707.js"><link rel="prefetch" href="/assets/js/40.9531cd2b.js"><link rel="prefetch" href="/assets/js/41.1a65e23a.js"><link rel="prefetch" href="/assets/js/42.55699843.js"><link rel="prefetch" href="/assets/js/43.747fc88c.js"><link rel="prefetch" href="/assets/js/44.e862c041.js"><link rel="prefetch" href="/assets/js/45.12cd7ac3.js"><link rel="prefetch" href="/assets/js/46.82c9ff48.js"><link rel="prefetch" href="/assets/js/47.38a0b2ac.js"><link rel="prefetch" href="/assets/js/48.79213ded.js"><link rel="prefetch" href="/assets/js/49.8727d659.js"><link rel="prefetch" href="/assets/js/50.a1281ff0.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0e20fdf4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0f4aee89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Elizabeth</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/js/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/web/browser/" class="nav-link">browser</a></li><li class="dropdown-item"><!----> <a href="/web/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/web/react/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/web/vue/" class="nav-link">vue</a></li><li class="dropdown-item"><!----> <a href="/web/webpack/" class="nav-link">webpack</a></li><li class="dropdown-item"><!----> <a href="/web/babel/" class="nav-link">babel</a></li><li class="dropdown-item"><!----> <a href="/web/performance/" class="nav-link">performance</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">nodejs</a></li><li class="dropdown-item"><!----> <a href="/backend/others/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">计算机</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer/algorithm/" class="nav-link">算法与数据结构</a></li><li class="dropdown-item"><!----> <a href="/computer/http/" class="nav-link">http</a></li><li class="dropdown-item"><!----> <a href="/computer/patterns/" class="nav-link router-link-exact-active router-link-active">设计模式</a></li></ul></div></div></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><ul class="sidebar-links"><li><a href="/computer/patterns/" class="active sidebar-link">设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/computer/patterns/#观察者模式" class="sidebar-link">观察者模式</a></li><li class="sidebar-sub-header"><a href="/computer/patterns/#工厂模式" class="sidebar-link">工厂模式</a></li><li class="sidebar-sub-header"><a href="/computer/patterns/#单例模式" class="sidebar-link">单例模式</a></li><li class="sidebar-sub-header"><a href="/computer/patterns/#装饰器模式" class="sidebar-link">装饰器模式</a></li><li class="sidebar-sub-header"><a href="/computer/patterns/#适配器模式" class="sidebar-link">适配器模式</a></li><li class="sidebar-sub-header"><a href="/computer/patterns/#代理模式" class="sidebar-link">代理模式</a></li><li class="sidebar-sub-header"><a href="/computer/patterns/#迭代器模式" class="sidebar-link">迭代器模式</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="设计模式"><a href="#设计模式" aria-hidden="true" class="header-anchor">#</a> 设计模式</h1> <p>虽然平时项目中或者框架源码中已经用过了一些设计模式，但前端对设计模式的讨论貌似还是不多。</p> <h2 id="观察者模式"><a href="#观察者模式" aria-hidden="true" class="header-anchor">#</a> 观察者模式</h2> <p>观察者模式和发布-订阅模式之间的区别，在于是否存在第三方、发布者能否直接感知订阅者（如图所示）。
<img src="data:image/jpeg;base64,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" alt></p> <h3 id="代码描述"><a href="#代码描述" aria-hidden="true" class="header-anchor">#</a> 代码描述</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义发布者类</span>
<span class="token keyword">class</span> <span class="token class-name">Publisher</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Publisher created'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 增加订阅者</span>
  <span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Publisher.add invoked'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 移除订阅者</span>
  <span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Publisher.remove invoked'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">===</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 通知所有订阅者</span>
  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Publisher.notify invoked'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在项目中的应用"><a href="#在项目中的应用" aria-hidden="true" class="header-anchor">#</a> 在项目中的应用</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handlers是一个map，用于存储事件与回调之间的对应关系</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// on方法用于安装事件监听器，它接受目标事件名和回调函数作为参数</span>
  <span class="token function">on</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 先检查一下目标事件名有没有对应的监听函数队列</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果没有，那么首先初始化一个监听函数队列</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 把回调函数推入目标事件的监听函数队列里去</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// emit方法用于触发目标事件，它接受事件名和监听函数入参作为参数</span>
  <span class="token function">emit</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 检查目标事件是否有监听函数队列</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果有，则逐个调用队列里的回调函数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 移除某个事件回调队列里的指定回调函数</span>
  <span class="token function">off</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> callbacks<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      callbacks<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 为事件注册单次监听器</span>
  <span class="token function">once</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 对回调函数进行包装，使其执行完毕自动被移除</span>
    <span class="token keyword">const</span> <span class="token function-variable function">wrapper</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      cb<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> wrapper<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> wrapper<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="工厂模式"><a href="#工厂模式" aria-hidden="true" class="header-anchor">#</a> 工厂模式</h2> <p>简单层面的理解就是把写死的地方换成变量，通过传参共用函数。</p> <h3 id="代码描述-2"><a href="#代码描述-2" aria-hidden="true" class="header-anchor">#</a> 代码描述</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span>name <span class="token punctuation">,</span> age<span class="token punctuation">,</span> career<span class="token punctuation">,</span> work<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">this</span><span class="token punctuation">.</span>career <span class="token operator">=</span> career
    <span class="token keyword">this</span><span class="token punctuation">.</span>work <span class="token operator">=</span> work
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Factory</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> work
    <span class="token keyword">switch</span><span class="token punctuation">(</span>career<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'coder'</span><span class="token punctuation">:</span>
            work <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token string">'写代码'</span><span class="token punctuation">,</span><span class="token string">'写系分'</span><span class="token punctuation">,</span> <span class="token string">'修Bug'</span><span class="token punctuation">]</span>
            <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token string">'product manager'</span><span class="token punctuation">:</span>
            work <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'订会议室'</span><span class="token punctuation">,</span> <span class="token string">'写PRD'</span><span class="token punctuation">,</span> <span class="token string">'催更'</span><span class="token punctuation">]</span>
            <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token string">'boss'</span><span class="token punctuation">:</span>
            work <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'喝茶'</span><span class="token punctuation">,</span> <span class="token string">'看报'</span><span class="token punctuation">,</span> <span class="token string">'见客户'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career<span class="token punctuation">,</span> work<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在项目中的应用-2"><a href="#在项目中的应用-2" aria-hidden="true" class="header-anchor">#</a> 在项目中的应用</h3> <p>比如在admin项目中，不同用户通常权限不同，如果每个页面路由都根据角色判断是否显示就非常冗余，而且低权限的用户如果知道高权限路由时，可以通过在浏览器上输入url跳转到高权限的页面（之前有项目由后端控制权限并返回对应有权限的页面，前端接收后再用函数对路由进行筛选）。此时，就可以根据用户角色统一控制哪些路由显示。
<img src="/assets/img/factory-1.b2b97ed2.jpeg" alt></p> <p>在登陆页导入该方法，请求登陆接口后根据权限添加路由:
<img src="/assets/img/factory-2.cabc999a.jpeg" alt></p> <h2 id="单例模式"><a href="#单例模式" aria-hidden="true" class="header-anchor">#</a> 单例模式</h2> <p>单例模式的核心是确保只有一个实例，并提供全局访问。比如弹窗只需要出现一个，又或者一个音乐播放程序，如果用户打开了一个音乐，又想打开一个音乐，那么之前的播放界面就会自动关闭，切换到当前的播放界面。</p> <h3 id="代码描述-3"><a href="#代码描述-3" aria-hidden="true" class="header-anchor">#</a> 代码描述</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SingleDog</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是一个单例对象'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断是否已经new过1个实例</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>SingleDog<span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 若这个唯一的实例不存在，那么先创建它</span>
            SingleDog<span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 如果这个唯一的实例已经存在，则直接返回</span>
        <span class="token keyword">return</span> SingleDog<span class="token punctuation">.</span>instance
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> s1 <span class="token operator">=</span> SingleDog<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> SingleDog<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// true</span>
s1 <span class="token operator">===</span> s2
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Singleton<span class="token punctuation">.</span>getInstance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>instance <span class="token punctuation">)</span><span class="token punctuation">{</span>
      instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="在项目中的应用-3"><a href="#在项目中的应用-3" aria-hidden="true" class="header-anchor">#</a> 在项目中的应用</h3> <p>vue.use通过单例模式避免重复安装插件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initUse</span> <span class="token punctuation">(</span>Vue<span class="token punctuation">:</span> GlobalAPI<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function-variable function">use</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>plugin<span class="token punctuation">:</span> Function <span class="token operator">|</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> installedPlugins <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedPlugins<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span><span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>vuex在install时也会进行判断，避免因重复安装丢失状态。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> Vue
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">install</span> <span class="token punctuation">(</span>_Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断传入的Vue实例对象是否已经被install过Vuex插件（是否有了唯一的state）</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Vue <span class="token operator">&amp;&amp;</span> _Vue <span class="token operator">===</span> Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
        <span class="token string">'[vuex] already installed. Vue.use(Vuex) should be called only once.'</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 若没有，则为这个Vue实例对象install一个唯一的Vuex</span>
  Vue <span class="token operator">=</span> _Vue
  <span class="token comment">// 将Vuex的初始化逻辑写进Vue的钩子函数里</span>
  <span class="token function">applyMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="装饰器模式"><a href="#装饰器模式" aria-hidden="true" class="header-anchor">#</a> 装饰器模式</h2> <p>它的定义是“在不改变原对象的基础上，通过对其进行包装拓展，使原有对象可以满足用户的更复杂需求”。</p> <h3 id="代码描述-4"><a href="#代码描述-4" aria-hidden="true" class="header-anchor">#</a> 代码描述</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">before</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> beforefn <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">beforefn</span><span class="token punctuation">(</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fn</span><span class="token punctuation">(</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token function">before</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">)</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 3 2 1 //</span>
</code></pre></div><h3 id="在项目中的应用-4"><a href="#在项目中的应用-4" aria-hidden="true" class="header-anchor">#</a> 在项目中的应用</h3> <p>高阶函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">BorderHoc</span> <span class="token operator">=</span> WrappedComponent <span class="token operator">=&gt;</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> border<span class="token punctuation">:</span> <span class="token string">'solid 1px red'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>WrappedComponent <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> borderHoc
</code></pre></div><p>redux的connect函数也是一个高阶函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">,</span> mergeProps<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">wrapWithConnect</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token class-name">Connect</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 从祖先Component处获得store</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store <span class="token operator">=</span> props<span class="token punctuation">.</span>store <span class="token operator">||</span> context<span class="token punctuation">.</span>store
        <span class="token keyword">this</span><span class="token punctuation">.</span>stateProps <span class="token operator">=</span> <span class="token function">computeStateProps</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dispatchProps <span class="token operator">=</span> <span class="token function">computeDispatchProps</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> storeState<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span>
        <span class="token comment">// 对stateProps、dispatchProps、parentProps进行合并</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">,</span> nextState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 进行判断，当数据发生改变时，Component重新渲染</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>propsChanged <span class="token operator">||</span> mapStateProducedChange <span class="token operator">||</span> dispatchPropsChanged<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateState</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">)</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 改变Component的state</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            storeState<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 生成包裹组件Connect</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>nextState<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    Connect<span class="token punctuation">.</span>contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">:</span> storeShape
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Connect<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>es7装饰器写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 把 connect 抽出来：</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> bindActionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> action <span class="token keyword">from</span> <span class="token string">'./action.js'</span>

<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span>app
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span>dispatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">bindActionCreators</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> dispatch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 将connect调用后的结果作为一个装饰器导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在组件里引入connect</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> connect <span class="token keyword">from</span> <span class="token string">'./connect.js'</span>

@connect
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// App的业务逻辑</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="适配器模式"><a href="#适配器模式" aria-hidden="true" class="header-anchor">#</a> 适配器模式</h2> <p>适配器模式的作用是解决两个软件实体间的接口不兼容的问题。使用适配器模式之后，原本
由于接口不兼容而不能工作的两个软件实体可以一起工作。</p> <h3 id="代码描述-5"><a href="#代码描述-5" aria-hidden="true" class="header-anchor">#</a> 代码描述</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> googleMap <span class="token operator">=</span> <span class="token punctuation">{</span>
show<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'开始渲染谷歌地图'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> baiduMap <span class="token operator">=</span> <span class="token punctuation">{</span>
display<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'开始渲染百度地图'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> baiduMapAdapter <span class="token operator">=</span> <span class="token punctuation">{</span>
show<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">return</span> baiduMap<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="在项目中的应用-5"><a href="#在项目中的应用-5" aria-hidden="true" class="header-anchor">#</a> 在项目中的应用</h3> <p>axios中使用适配器模式屏蔽平台差异</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getDefaultAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> adapter<span class="token punctuation">;</span>
  <span class="token comment">// Only Node.JS has a process variable that is of [[Class]] process</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> process <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object process]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// For node use HTTP adapter</span>
    adapter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./adapters/http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> XMLHttpRequest <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// For browsers use XHR adapter</span>
    adapter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./adapters/xhr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> adapter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="代理模式"><a href="#代理模式" aria-hidden="true" class="header-anchor">#</a> 代理模式</h2> <p>为了单一职责或者安全，自己能干的事让别人代办。。</p> <h3 id="在项目中的应用-6"><a href="#在项目中的应用-6" aria-hidden="true" class="header-anchor">#</a> 在项目中的应用</h3> <p>图片预加载</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>

<span class="token comment">//立即执行函数</span>
<span class="token keyword">var</span> myImg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//在页面上创建img元素</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    setImg<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">{</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> src
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 代理函数</span>
<span class="token keyword">var</span> proxyImg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//如果给image加src属性后就相当于在浏览器中缓存了一张图片</span>
  <span class="token comment">// Image()构造函数在功能上等同于document.createElement(‘img‘)。</span>
  <span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// image有src并加载完成才会触发onload</span>
  image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;加载完毕&quot;</span><span class="token punctuation">)</span>
    myImg<span class="token punctuation">.</span><span class="token function">setImg</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    setSrc<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//loding</span>
      myImg<span class="token punctuation">.</span><span class="token function">setImg</span><span class="token punctuation">(</span><span class="token string">&quot;1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//需要加载的图片</span>
      image<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//定义需要加载的图片路径</span>
<span class="token keyword">var</span> src <span class="token operator">=</span> <span class="token string">&quot;https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3127448566,3364301089&amp;fm=26&amp;gp=0.jpg&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 调用函数</span>
proxyImg<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>缓存代理</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">mult</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'开始计算乘积'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
a <span class="token operator">=</span> a <span class="token operator">*</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">mult</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出： 6</span>
<span class="token function">mult</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出： 24</span>
现在加入缓存代理函数：
<span class="token keyword">var</span> proxyMult <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">var</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">var</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>join<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> arguments<span class="token punctuation">,</span> <span class="token string">','</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> args <span class="token keyword">in</span> cache <span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">return</span> cache<span class="token punctuation">[</span> args <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> cache<span class="token punctuation">[</span> args <span class="token punctuation">]</span> <span class="token operator">=</span> mult<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">proxyMult</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出： 24</span>
<span class="token function">proxyMult</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出： 24</span>
</code></pre></div><h2 id="迭代器模式"><a href="#迭代器模式" aria-hidden="true" class="header-anchor">#</a> 迭代器模式</h2> <p>迭代器模式提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露该对象的内部表示。</p> <h3 id="代码实现"><a href="#代码实现" aria-hidden="true" class="header-anchor">#</a> 代码实现</h3> <p>es6版本</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 编写一个迭代器生成函数</span>
<span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">iteratorGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">'1号选手'</span>
  <span class="token keyword">yield</span> <span class="token string">'2号选手'</span>
  <span class="token keyword">yield</span> <span class="token string">'3号选手'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token function">iteratorGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>es5版本</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义生成器函数，入参是任意集合</span>
<span class="token keyword">function</span> <span class="token function">iteratorGenerator</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// idx记录当前访问的索引</span>
  <span class="token keyword">var</span> idx <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token comment">// len记录传入集合的长度</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自定义next方法</span>
    next<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果索引还没有超出集合长度，done为false</span>
      <span class="token keyword">var</span> done <span class="token operator">=</span> idx <span class="token operator">&gt;=</span> len
      <span class="token comment">// 如果done为false，则可以继续取值</span>
      <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token operator">!</span>done <span class="token operator">?</span> list<span class="token punctuation">[</span>idx<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> undefined
      <span class="token comment">// 将当前值与遍历是否完毕（done）返回</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        done<span class="token punctuation">:</span> done<span class="token punctuation">,</span>
        value<span class="token punctuation">:</span> value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/15/2020, 6:34:56 PM</span></div></div> <!----> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div> <!----></div></div>
    <script src="/assets/js/13.f5dee087.js" defer></script><script src="/assets/js/app.f73642b0.js" defer></script>
  </body>
</html>
